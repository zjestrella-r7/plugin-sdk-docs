<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>clean_dict(dict) &#8212; Komand Plugin SDK 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>To make use of the helpers, import the komand namespace</p>
<p>You can make use of <code class="docutils literal"><span class="pre">dir</span></code> python builtin to fund out more about a specific function</p>
<p><code class="docutils literal"><span class="pre">dir(komand.helper.clean_dict)</span></code></p>
<p>You can also use an sdk builtin <code class="docutils literal"><span class="pre">help</span></code> method to display information in the plugin output, although this is for testing only and will result in an error in the plugin.
Avoid leaving these calls in the final plugin. You should strive to rely on the official documentation where possible.</p>
<p><code class="docutils literal"><span class="pre">help(komand.helper.clean_dict)</span></code></p>
<div class="section" id="clean-dict-dict">
<h1>clean_dict(dict)<a class="headerlink" href="#clean-dict-dict" title="Permalink to this headline">¶</a></h1>
<p>Takes a dictionary as an argument and returns a new, cleaned, dictionary</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;stuff&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="s1">&#39;more&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span> <span class="p">}</span>
<span class="go">&quot;&quot;&quot;Keys c and e are removed&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">komand</span><span class="o">.</span><span class="n">helper</span><span class="o">.</span><span class="n">clean_dict</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: &#39;stuff&#39;, &#39;b&#39;: 1, &#39;d&#39;: &#39;more&#39;}</span>
</pre></div>
</div>
</div>
<div class="section" id="clean-list-list">
<h1>clean_list(list)<a class="headerlink" href="#clean-list-list" title="Permalink to this headline">¶</a></h1>
<p>Takes a list as an argument and returns a new, cleaned, list</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;stuff&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s1">&#39;more&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span> <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clean_list</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
<span class="go">[&#39;stuff&#39;, 1, &#39;more&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="open-file-path">
<h1>open_file(path)<a class="headerlink" href="#open-file-path" title="Permalink to this headline">¶</a></h1>
<p>Takes a file path as a string to open and returns a file object on success or None</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">open_file</span><span class="p">(</span><span class="s1">&#39;/tmp/testfile&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">&#39;test\n&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="check-cachefile-path">
<h1>check_cachefile(path)<a class="headerlink" href="#check-cachefile-path" title="Permalink to this headline">¶</a></h1>
<p>Takes a string of the file path to check</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">komand</span><span class="o">.</span><span class="n">helper</span><span class="o">.</span><span class="n">check_cachefile</span><span class="p">(</span><span class="s1">&#39;/var/cache/mycache&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="go">&quot;&quot;&quot;This works too, /var/cache is not required&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">komand</span><span class="o">.</span><span class="n">helper</span><span class="o">.</span><span class="n">check_cachefile</span><span class="p">(</span><span class="s1">&#39;mycache&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">komand</span><span class="o">.</span><span class="n">helper</span><span class="o">.</span><span class="n">check_cachefile</span><span class="p">(</span><span class="s1">&#39;nofile&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-cachefile-path">
<h1>remove_cachefile(path)<a class="headerlink" href="#remove-cachefile-path" title="Permalink to this headline">¶</a></h1>
<p>Takes a file path as a string</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;/var/cache&#39;</span><span class="p">)</span>
<span class="go">[&#39;test&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">komand</span><span class="o">.</span><span class="n">helper</span><span class="o">.</span><span class="n">remove_cachefile</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;/var/cache&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="open-cachefile-file">
<h1>open_cachefile(file)<a class="headerlink" href="#open-cachefile-file" title="Permalink to this headline">¶</a></h1>
<p>Takes a file path as a string</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">komand</span><span class="o">.</span><span class="n">helper</span><span class="o">.</span><span class="n">open_cachefile</span><span class="p">(</span><span class="s1">&#39;/var/cache/test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">&#39;stuff\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;/var/cache&#39;</span><span class="p">)</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">komand</span><span class="o">.</span><span class="n">helper</span><span class="o">.</span><span class="n">open_cachefile</span><span class="p">(</span><span class="s1">&#39;/var/cache/myplugin/cache.file&#39;</span><span class="p">)</span>
<span class="go">&quot;&quot;&quot;The file has been created&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">komand</span><span class="o">.</span><span class="n">helper</span><span class="o">.</span><span class="n">check_cachefile</span><span class="p">(</span><span class="s1">&#39;/var/cache/myplugin/cache.file&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="lock-cache-file">
<h1>lock_cache(file)<a class="headerlink" href="#lock-cache-file" title="Permalink to this headline">¶</a></h1>
<p>Takes a file path as a string</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">komand</span><span class="o">.</span><span class="n">helper</span><span class="o">.</span><span class="n">lock_cache</span><span class="p">(</span><span class="s1">&#39;/var/cache/lock/lock1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="unlock-cache-file-delay">
<h1>unlock_cache(file, delay)<a class="headerlink" href="#unlock-cache-file-delay" title="Permalink to this headline">¶</a></h1>
<p>Takes a file path as a string and a delay length in seconds as an int or float</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">delay</span> <span class="o">=</span> <span class="mi">60</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">komand</span><span class="o">.</span><span class="n">helper</span><span class="o">.</span><span class="n">unlock_cache</span><span class="p">(</span><span class="s1">&#39;/var/cache/lock/lock1&#39;</span><span class="p">,</span> <span class="n">delay</span><span class="p">)</span>
<span class="go">&quot;&quot;&quot;Sixty seconds later&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_name</span> <span class="o">=</span> <span class="s1">&#39;/var/cache/lock/lock1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">komand</span><span class="o">.</span><span class="n">helper</span><span class="o">.</span><span class="n">unlock_cache</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
<span class="go">&quot;&quot;&quot;Sixty seconds later&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="get-hashes-string-str">
<h1>get_hashes_string(str)<a class="headerlink" href="#get-hashes-string-str" title="Permalink to this headline">¶</a></h1>
<p>Returns a dictionary of common hashes from a string</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_hashes_string</span><span class="p">(</span><span class="s1">&#39;thisisastring&#39;</span><span class="p">)</span>
<span class="go">{u&#39;sha256&#39;: &#39;572642d5581b8b466da59e87bf267ceb7b2afd880b59ed7573edff4d980eb1d5&#39;, u&#39;sha1&#39;:</span>
<span class="go">&#39;93697ac6942965a0814ed2e4ded7251429e5c7a7&#39;, u&#39;sha512&#39;:</span>
<span class="go">&#39;9145416eb9cc0c9ff3aecbe9a400f21ca2b99c927f63a9a245d22ac4fe6fe27036643e373708e3bdf7ace4f3b52573182ec6d1f38c7d25f9e06144617ad1cdc8&#39;,</span>
<span class="go">u&#39;md5&#39;: &#39;0bba161a7165a211c7435c950ee78438&#39;}</span>
</pre></div>
</div>
</div>
<div class="section" id="check-hashes-src-checksum">
<h1>check_hashes(src, checksum)<a class="headerlink" href="#check-hashes-src-checksum" title="Permalink to this headline">¶</a></h1>
<p>Returns a boolean on whether checksum was a hash of provided string</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">check_hashes</span><span class="p">(</span><span class="s1">&#39;thisisastring&#39;</span><span class="p">,</span> <span class="s1">&#39;0bba161a7165a211c7435c950ee78438&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_hashes</span><span class="p">(</span><span class="s1">&#39;thisisanotherstring&#39;</span><span class="p">,</span> <span class="s1">&#39;0bba161a7165a211c7435c950ee78438&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
<div class="section" id="extract-value">
<h1>extract_value()<a class="headerlink" href="#extract-value" title="Permalink to this headline">¶</a></h1>
<p>Takes 4 arguments that regexes/patterns as strings</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">Shell: /bin/bash</span><span class="se">\n\t</span><span class="s1">&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">komand</span><span class="o">.</span><span class="n">helper</span><span class="o">.</span><span class="n">extract_value</span><span class="p">(</span><span class="s1">r&#39;\s&#39;</span><span class="p">,</span> <span class="s1">&#39;Shell&#39;</span><span class="p">,</span> <span class="s1">r&#39;:\s(.*)\s&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
<span class="go">&#39;/bin/bash&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="open-url-url">
<h1>open_url(url)<a class="headerlink" href="#open-url-url" title="Permalink to this headline">¶</a></h1>
<p>Takes a URL as a string and optionally a timeout as an int, verify as a boolean, and a dictionary of headers</p>
<p>A urllib2 obj is returned upon success. <cite>None</cite> is returned if a 304 Not modified is the response.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">urlobj</span> <span class="o">=</span> <span class="n">open_url</span><span class="p">(</span><span class="s1">&#39;http://google.com&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">urlobj</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">&#39;&lt;!doctype html&gt;&lt;html itemscope=&quot;&quot; itemtype=&quot;http://schema.org/WebPage&quot; lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta content=&quot;Se...&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">urlobj</span> <span class="o">=</span> <span class="n">open_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">Range</span><span class="o">=</span><span class="s1">&#39;bytes=0-3&#39;</span><span class="p">,</span> <span class="n">Authorization</span><span class="o">=</span><span class="s1">&#39;aslfasdfasdfasdfasdf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">urlobj</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">Auth</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">urlobj</span> <span class="o">=</span> <span class="n">open_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">User_Agent</span><span class="o">=</span><span class="s1">&#39;curl/0.7.9&#39;</span><span class="p">,</span> <span class="n">If_None_Match</span><span class="o">=</span><span class="n">etag</span><span class="p">)</span>
<span class="go">ERROR:root:HTTPError: 304 for http://24.151.224.211/ui/1.0.1.1038/dynamic/login.html</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&lt;type &#39;NoneType&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">urlobj</span> <span class="o">=</span> <span class="n">open_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">User_Agent</span><span class="o">=</span><span class="s1">&#39;curl/0.7.9&#39;</span><span class="p">,</span> <span class="n">If_Modified_Since</span><span class="o">=</span><span class="n">mod</span><span class="p">)</span>
<span class="go">ERROR:root:HTTPError: 304 for http://24.151.224.211/ui/1.0.1.1038/dynamic/login.html</span>
</pre></div>
</div>
</div>
<div class="section" id="get-url-filename-url">
<h1>get_url_filename(url)<a class="headerlink" href="#get-url-filename-url" title="Permalink to this headline">¶</a></h1>
<p>Takes a URL as a string, returns filename as string or None</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://www.irongeek.com/robots.txt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_url_filename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="go">&#39;robots.txt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_url_filename</span><span class="p">(</span><span class="s1">&#39;http://203.66.168.223:83/&#39;</span><span class="p">)</span>
<span class="go">&#39;Create_By_AutoWeb.htm&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">get_url_filename</span><span class="p">(</span><span class="s1">&#39;http://www.google.com&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
<span class="gp">... </span>  <span class="k">print</span> <span class="s1">&#39;No file found&#39;</span>
<span class="go">No file found</span>
</pre></div>
</div>
<p>exec_command(path_with_args)</p>
<p>Takes a command and its arguments as a string</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exec_command</span><span class="p">(</span><span class="s1">&#39;/bin/ls&#39;</span><span class="p">)</span>
<span class="go">{&#39;rcode&#39;: 0, &#39;stderr&#39;: &#39;&#39;, &#39;stdout&#39;:</span>
<span class="go">&#39;GO.md\nPYTHON.md\nREADME.md\nSPEC.md\nball.pyc\nimgs\nold.py\nplugins.py\nplugins.pyc\nstatic.py\nstatic.pyc\n&#39;}</span>
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">clean_dict(dict)</a></li>
<li><a class="reference internal" href="#clean-list-list">clean_list(list)</a></li>
<li><a class="reference internal" href="#open-file-path">open_file(path)</a></li>
<li><a class="reference internal" href="#check-cachefile-path">check_cachefile(path)</a></li>
<li><a class="reference internal" href="#remove-cachefile-path">remove_cachefile(path)</a></li>
<li><a class="reference internal" href="#open-cachefile-file">open_cachefile(file)</a></li>
<li><a class="reference internal" href="#lock-cache-file">lock_cache(file)</a></li>
<li><a class="reference internal" href="#unlock-cache-file-delay">unlock_cache(file, delay)</a></li>
<li><a class="reference internal" href="#get-hashes-string-str">get_hashes_string(str)</a></li>
<li><a class="reference internal" href="#check-hashes-src-checksum">check_hashes(src, checksum)</a></li>
<li><a class="reference internal" href="#extract-value">extract_value()</a></li>
<li><a class="reference internal" href="#open-url-url">open_url(url)</a></li>
<li><a class="reference internal" href="#get-url-filename-url">get_url_filename(url)</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/python_helpers.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Komand.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/python_helpers.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>